<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download CSV with Randomized Data</title>
</head>
<body>

    <h1>Download CSV Example with Randomized Values</h1>
    <button id="downloadBtn">Download CSV</button>

    <script>
        // Original data to be randomized
        const csvData = [
            ["Name", "Age", "Country"],  // CSV Header
            ["John Doe", "29", "USA"],
            ["Jane Smith", "35", "Canada"],
            ["Sam Brown", "23", "UK"]
        ];

        // Function to generate random names
        function getRandomName() {
            const names = ["Alice", "Bob", "Charlie", "David", "Emily", "Frank", "Grace"];
            return names[Math.floor(Math.random() * names.length)];
        }

        // Function to generate random age between 20 and 50
        function getRandomAge() {
            return Math.floor(Math.random() * 31) + 20;  // Generates a random age between 20 and 50
        }

        // Function to randomly select a country
        function getRandomCountry() {
            const countries = ["USA", "Canada", "UK", "Germany", "France", "Australia", "Japan"];
            return countries[Math.floor(Math.random() * countries.length)];
        }

        // Function to randomize data (excluding the header row)
        function randomizeData(data) {
            return data.map((row, index) => {
                if (index === 0) return row; // Keep the header unchanged
                return [getRandomName(), getRandomAge(), getRandomCountry()];
            });
        }

        // Function to convert array data to CSV format
        function arrayToCSV(data) {
            return data.map(row => row.join(",")).join("\n");
        }

        // Function to trigger CSV file download
        function downloadCSV(filename, data) {
            const csvContent = arrayToCSV(data);
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            
            link.setAttribute("href", url);
            link.setAttribute("download", filename);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Event listener for button click
        document.getElementById('downloadBtn').addEventListener('click', function() {
            const randomizedData = randomizeData(csvData);
            downloadCSV("randomized_sample.csv", randomizedData);
        });
    </script>

</body>
</html>
